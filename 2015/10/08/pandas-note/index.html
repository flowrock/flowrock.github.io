
 <!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  
    <title>pandas note | Flow Rock</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Ruoyan Liu">
    

    
    <meta name="description" content="SeriesSeries is an important data structure in pandas, similar to dictionary in python.
First import packages and classes.&amp;gt;&amp;gt;&amp;gt; import numpy as np&amp;gt;&amp;gt;&amp;gt; import pandas as pd&amp;gt;&amp;gt;&amp;gt; fr">
<meta property="og:type" content="article">
<meta property="og:title" content="pandas note">
<meta property="og:url" content="http://www.flowrocky.com/2015/10/08/pandas-note/index.html">
<meta property="og:site_name" content="Flow Rock">
<meta property="og:description" content="SeriesSeries is an important data structure in pandas, similar to dictionary in python.
First import packages and classes.&amp;gt;&amp;gt;&amp;gt; import numpy as np&amp;gt;&amp;gt;&amp;gt; import pandas as pd&amp;gt;&amp;gt;&amp;gt; fr">
<meta property="og:image" content="http://www.flowrocky.com/2015/10/08/pandas-note/db.png">
<meta property="og:image" content="http://www.flowrocky.com/2015/10/08/pandas-note/correlation.png">
<meta property="og:updated_time" content="2015-10-09T16:25:29.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="pandas note">
<meta name="twitter:description" content="SeriesSeries is an important data structure in pandas, similar to dictionary in python.
First import packages and classes.&amp;gt;&amp;gt;&amp;gt; import numpy as np&amp;gt;&amp;gt;&amp;gt; import pandas as pd&amp;gt;&amp;gt;&amp;gt; fr">

    
    <link rel="alternative" href="/atom.xml" title="Flow Rock" type="application/atom+xml">
    
    
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Flow Rock">Flow Rock</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" autocomplete="off" name="q" maxlength="20" placeholder="Search" />
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/10/08/pandas-note/" title="pandas note" itemprop="url">pandas note</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Ruoyan Liu" target="_blank" itemprop="author">Ruoyan Liu</a>
		
  <p class="article-time">
    <time datetime="2015-10-08T15:44:04.000Z" itemprop="datePublished"> Published 2015-10-08</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Series"><span class="toc-number">1.</span> <span class="toc-text">Series</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DataFrame"><span class="toc-number">2.</span> <span class="toc-text">DataFrame</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reindexing"><span class="toc-number">3.</span> <span class="toc-text">Reindexing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Data_Alignment"><span class="toc-number">4.</span> <span class="toc-text">Data Alignment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Rank_and_Sort"><span class="toc-number">5.</span> <span class="toc-text">Rank and Sort</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Summary_Statistics"><span class="toc-number">6.</span> <span class="toc-text">Summary Statistics</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Example_for_stock_prices"><span class="toc-number">6.1.</span> <span class="toc-text">Example for stock prices</span></a></li></ol></li></ol>
		
		</div>
		
		<h2 id="Series"><em>Series</em></h2><p>Series is an important data structure in pandas, similar to dictionary in python.</p>
<p>First import packages and classes.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">from</span> pandas <span class="keyword">import</span> Series, DataFrame</span><br></pre></td></tr></table></figure></p>
<p>Create and show Series object.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="prompt">&gt;&gt;&gt; </span>ser = Series([<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">12</span>])</span><br><span class="line"><span class="comment">#show</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>ser</span><br><span class="line"><span class="number">0</span>    <span class="number">3</span></span><br><span class="line"><span class="number">1</span>    <span class="number">6</span></span><br><span class="line"><span class="number">2</span>    <span class="number">9</span></span><br><span class="line"><span class="number">3</span>    <span class="number">12</span></span><br><span class="line">dtype: int64</span><br></pre></td></tr></table></figure></p>
<p>The Series object has automatic 0-based index if no index is explicitly annonunced.</p>
<p>Show only the values of Series object, note the values are in an array.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="prompt">&gt;&gt;&gt; </span>ser.values</span><br><span class="line">array([<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">12</span>], dtype=int64)</span><br></pre></td></tr></table></figure></p>
<p>Show only the indexes.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="prompt">&gt;&gt;&gt; </span>ser.index</span><br><span class="line">Int64Index([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], dtype=<span class="string">'int64'</span>)</span><br></pre></td></tr></table></figure></p>
<p>Create Series with explicit index.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="prompt">&gt;&gt;&gt; </span>ww2_cas = Series([<span class="number">8700000</span>,<span class="number">4300000</span>,<span class="number">3000000</span>,<span class="number">21000000</span>,<span class="number">400000</span>], index=[<span class="string">'USSR'</span>,<span class="string">'Germany'</span>,<span class="string">'China'</span>,<span class="string">'Japan'</span>,<span class="string">'USA'</span>])</span><br><span class="line"><span class="comment">#show</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>ww2_cas</span><br><span class="line">USSR    <span class="number">8700000</span></span><br><span class="line">Germany <span class="number">4300000</span></span><br><span class="line">China   <span class="number">3000000</span></span><br><span class="line">Japan   <span class="number">2100000</span></span><br><span class="line">USA      <span class="number">400000</span></span><br><span class="line">dtype: int64</span><br></pre></td></tr></table></figure></p>
<p>Show value for a given index.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="prompt">&gt;&gt;&gt; </span>wwe_cas[<span class="string">'USA'</span>]</span><br><span class="line"><span class="number">400000</span></span><br></pre></td></tr></table></figure></p>
<p>Show values for a given condition.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="prompt">&gt;&gt;&gt; </span>ww2_cas[ww2_cas&gt;<span class="number">4000000</span>]</span><br><span class="line">USSR    <span class="number">8700000</span></span><br><span class="line">Germany <span class="number">4300000</span></span><br><span class="line">dtype: int64</span><br></pre></td></tr></table></figure></p>
<p>Check membership.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="prompt">&gt;&gt;&gt; </span><span class="string">'USSR'</span> <span class="keyword">in</span> ww2_cas</span><br><span class="line"><span class="keyword">True</span></span><br></pre></td></tr></table></figure></p>
<p>Convert Series into python dictionary and convert back.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#convert Series to dictionary, which keys are indexes in Series but sorted (this case by alphabet)</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>ww2_dict = ww2_cas.to_dict()</span><br><span class="line"><span class="comment">#convert from dictionary back to Series</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>ww2_ser = Series(ww2_dict)</span><br></pre></td></tr></table></figure></p>
<p>pandas has method <code>isnull(obj)</code> and <code>notnull(obj)</code> to see which item in Series object is null/not null.</p>
<p>When adding two Series, the indexes will be aligned automatically, but if one of the value is NaN, then the sum will be NaN. This is different with internal Series and DataFrame sum method which takes NaN as 0.</p>
<h2 id="DataFrame"><em>DataFrame</em></h2><p>First let’s get some <a href="http://en.wikipedia.org/wiki/NFL_win-loss_records" target="_blank" rel="external">NFL win and loss records data</a> from wiki. Copy some lines into clipboard.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#read the data from clipboard and convert to DataFrame object</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>nfl_frame = pd.read_clipboard()</span><br><span class="line"><span class="comment">#show</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>nfl_frame</span><br><span class="line">Rank    Team    Won Lost    Tied*   Pct.    First Season    Total Games Conference</span><br><span class="line"><span class="number">0</span>   <span class="number">1</span>   Dallas Cowboys  <span class="number">510</span> <span class="number">378</span> <span class="number">6</span>   <span class="number">0.574</span>   <span class="number">1960</span>    <span class="number">894</span> NFC East</span><br><span class="line"><span class="number">1</span>   <span class="number">2</span>   Chicago Bears   <span class="number">752</span> <span class="number">563</span> <span class="number">42</span>  <span class="number">0.570</span>   <span class="number">1920</span>    <span class="number">1357</span>    NFC North</span><br><span class="line"><span class="number">2</span>   <span class="number">3</span>   Green Bay Packers   <span class="number">741</span> <span class="number">561</span> <span class="number">37</span>  <span class="number">0.567</span>   <span class="number">1921</span>    <span class="number">1339</span>    NFC North</span><br><span class="line"><span class="number">3</span>   <span class="number">4</span>   Miami Dolphins  <span class="number">443</span> <span class="number">345</span> <span class="number">4</span>   <span class="number">0.562</span>   <span class="number">1966</span>    <span class="number">792</span> AFC East</span><br><span class="line"><span class="number">4</span>   <span class="number">5</span>   Baltimore Ravens    <span class="number">182</span> <span class="number">143</span> <span class="number">1</span>   <span class="number">0.560</span>   <span class="number">1996</span>    <span class="number">326</span> AFC North</span><br></pre></td></tr></table></figure></p>
<p>Grab the column names with .columns<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="prompt">&gt;&gt;&gt; </span>nfl_frame.columns</span><br><span class="line">Index([<span class="string">u'Rank'</span>, <span class="string">u'Team'</span>, <span class="string">u'Won'</span>, <span class="string">u'Lost'</span>, <span class="string">u'Tied*'</span>, <span class="string">u'Pct.'</span>, <span class="string">u'First Season'</span>, <span class="string">u'Total Games'</span>, <span class="string">u'Conference'</span>], dtype=<span class="string">'object'</span>)</span><br></pre></td></tr></table></figure></p>
<p>See specific data columns.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="prompt">&gt;&gt;&gt; </span>DataFrame(nfl_frame, column=[<span class="string">'Team'</span>,<span class="string">'First Season'</span>,<span class="string">'Total Games'</span>])</span><br></pre></td></tr></table></figure></p>
<p>Other simpler ways to see data column.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#retrieve team column</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>nfl_frame.Team </span><br><span class="line"><span class="comment">#retrieve total games column</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>nfl_frame[<span class="string">'Total Games'</span>]</span><br></pre></td></tr></table></figure></p>
<p>Retrieve row using indexing.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#retieve the row of Miami Dolphins</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>nfl_frame.ix[<span class="number">3</span>]</span><br></pre></td></tr></table></figure></p>
<p>Assign values to entire columns.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#add a new attribute stadium and all values is "Levi's statium", nul_frame will change inplace</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>nfl_frame[<span class="string">'statium'</span>] = <span class="string">"Levi's statium"</span></span><br></pre></td></tr></table></figure></p>
<p>Column can be updated with a new Series object.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="prompt">&gt;&gt;&gt; </span>statiums = Series([<span class="string">"Levi's Stadium"</span>,<span class="string">"AT&amp;T Stadium"</span>],index=[<span class="number">4</span>,<span class="number">0</span>])</span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>nfl_frame[<span class="string">'Stadium'</span>]=stadiums</span><br></pre></td></tr></table></figure></p>
<p>Delete column.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">del</span> nfl_frame[<span class="string">'Stadium'</span>]</span><br></pre></td></tr></table></figure></p>
<p>See more information, please <a href="http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.html" target="_blank" rel="external">click here</a>.</p>
<h2 id="Reindexing"><em>Reindexing</em></h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#create a new Series</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>ser1 = Series([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],index=[<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>,<span class="string">'D'</span>])</span><br><span class="line"><span class="comment">#reindex to new index</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>ser2 = ser1.reindex([<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>,<span class="string">'D'</span>,<span class="string">'E'</span>,<span class="string">'F'</span>])</span><br></pre></td></tr></table></figure>
<p>The new indexes ‘E’,’F’ will have NaN values.</p>
<p>We can assign new value when reindexing using argument <code>fill_value</code> in method reindex().</p>
<p>We can use discrete indexes and interpolate values between indices using ‘ffill’.<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">#create a new Series with indexes 0,5,10</span><br><span class="line">&gt;&gt;&gt; ser3 = Series(['USA,'Mexico','Canada'],index=[0,5,10])</span><br><span class="line">#interpolate values, e.g. ser3[1-4]='USA',ser3[6-9]='Mexico'...</span><br><span class="line">&gt;&gt;&gt; ser3.reindex(range(15),method='ffill')</span><br></pre></td></tr></table></figure></p>
<p>Another quick way to reindex uses label-indexing with ix.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#new_columns is a list defined beforehand</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>dframe.ix[[<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>,<span class="string">'D'</span>,<span class="string">'E'</span>,<span class="string">'F'</span>],new_columns]</span><br></pre></td></tr></table></figure></p>
<h2 id="Data_Alignment"><em>Data Alignment</em></h2><p>As shown above, that dframe1+dframe2 will align data (indexes and columns) automatically, but if there is any NaN, the sum is NaN. If we want to ignore NaN (do not take NaN into summation), we can use <code>dframe1.add(dframe2,fill_value=0)</code>, “fill_value=0” will replace NaN with 0.</p>
<h2 id="Rank_and_Sort"><em>Rank and Sort</em></h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#sort by index, e.g. if indexes are strings, then sort by alphabet</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>ser1.sort_index()</span><br><span class="line"><span class="comment">#sort by value, but do not replace the orginal one</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>ser1.order()</span><br><span class="line"><span class="comment">#sort by value and replace the original one</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>ser1.sort()</span><br></pre></td></tr></table></figure>
<h2 id="Summary_Statistics"><em>Summary Statistics</em></h2><p>Internal sum<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#sum each column</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>dframe1.sum()</span><br><span class="line"><span class="comment">#sum each row</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>dframe1.sum(axis=<span class="number">1</span>)</span><br><span class="line"><span class="comment">#cumulative sum, i.e, the value will be replaced by the cumulative summation, like what a calculator does</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>dframe1.cumsum()</span><br><span class="line"><span class="comment">#e.g, [4,3,7].cumsum() = [4,7,14]</span></span><br></pre></td></tr></table></figure></p>
<p>List basic statistics of the values in the DataFrame<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="prompt">&gt;&gt;&gt; </span>dframe1.describe()</span><br></pre></td></tr></table></figure></p>
<p>Will list count, mean, std, min, 25%, 50%, 75% and max of each column</p>
<p>Also, calculation of covriance and correlation is supported.</p>
<p>For referencing covriance and correlation</p>
<p><nbsp><br><div class="video-container"><iframe src="//www.youtube.com/embed/xGbpuFNR1ME" frameborder="0" allowfullscreen></iframe></div></nbsp></p>
<p><nbsp><br><div class="video-container"><iframe src="//www.youtube.com/embed/4EXNedimDMs" frameborder="0" allowfullscreen></iframe></div></nbsp></p>
<h3 id="Example_for_stock_prices"><strong>Example for stock prices</strong></h3><p>We grab the stock data for some oil companies between 01/01/2010 and 01/01/2013<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> pandas.io.data <span class="keyword">as</span> pdweb</span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> datetime</span><br><span class="line"><span class="comment">#Get the closing prices</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>prices = pdweb.get_data_yahoo([<span class="string">'CVX'</span>,<span class="string">'XOM'</span>,<span class="string">'BP'</span>], </span><br><span class="line">                               start=datetime.datetime(<span class="number">2010</span>, <span class="number">1</span>, <span class="number">1</span>), </span><br><span class="line">                               end=datetime.datetime(<span class="number">2013</span>, <span class="number">1</span>, <span class="number">1</span>))[<span class="string">'Adj Close'</span>]</span><br><span class="line"><span class="comment">#show the first 5 records</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>prices.head()</span><br><span class="line">            BP      CVX     XOM</span><br><span class="line">Date            </span><br><span class="line"><span class="number">2010</span>-<span class="number">01</span>-<span class="number">04</span>  <span class="number">46.97</span>   <span class="number">66.17</span>   <span class="number">60.26</span></span><br><span class="line"><span class="number">2010</span>-<span class="number">01</span>-<span class="number">05</span>  <span class="number">47.30</span>   <span class="number">66.63</span>   <span class="number">60.50</span></span><br><span class="line"><span class="number">2010</span>-<span class="number">01</span>-<span class="number">06</span>  <span class="number">47.55</span>   <span class="number">66.64</span>   <span class="number">61.02</span></span><br><span class="line"><span class="number">2010</span>-<span class="number">01</span>-<span class="number">07</span>  <span class="number">47.53</span>   <span class="number">66.39</span>   <span class="number">60.83</span></span><br><span class="line"><span class="number">2010</span>-<span class="number">01</span>-<span class="number">08</span>  <span class="number">47.64</span>   <span class="number">66.51</span>   <span class="number">60.59</span></span><br><span class="line"><span class="comment">#get volumn trades</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>volume = pdweb.get_data_yahoo([<span class="string">'CVX'</span>,<span class="string">'XOM'</span>,<span class="string">'BP'</span>], </span><br><span class="line">                               start=datetime.datetime(<span class="number">2010</span>, <span class="number">1</span>, <span class="number">1</span>), </span><br><span class="line">                               end=datetime.datetime(<span class="number">2013</span>, <span class="number">1</span>, <span class="number">1</span>))[<span class="string">'Volume'</span>]</span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>volumn.head()</span><br><span class="line">            BP      CVX         XOM</span><br><span class="line">Date            </span><br><span class="line"><span class="number">2010</span>-<span class="number">01</span>-<span class="number">04</span>  <span class="number">3956100</span> <span class="number">10173800</span>    <span class="number">27809100</span></span><br><span class="line"><span class="number">2010</span>-<span class="number">01</span>-<span class="number">05</span>  <span class="number">4109600</span> <span class="number">10593700</span>    <span class="number">30174700</span></span><br><span class="line"><span class="number">2010</span>-<span class="number">01</span>-<span class="number">06</span>  <span class="number">6227900</span> <span class="number">11014600</span>    <span class="number">35044700</span></span><br><span class="line"><span class="number">2010</span>-<span class="number">01</span>-<span class="number">07</span>  <span class="number">4431300</span> <span class="number">9626900</span>     <span class="number">27192100</span></span><br><span class="line"><span class="number">2010</span>-<span class="number">01</span>-<span class="number">08</span>  <span class="number">3786100</span> <span class="number">5624300</span>     <span class="number">24891800</span></span><br><span class="line"><span class="comment">#get the return</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>rets = prices.pct_change()</span><br><span class="line"><span class="comment">#get the correlation of the stocks</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>corr = rets.corr</span><br><span class="line"><span class="comment">#see the prices over time to get a very rough idea of the correlation between the stock prices</span></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>prices.plot()</span><br></pre></td></tr></table></figure></p>
<figure><br>    <img src="/2015/10/08/pandas-note/db.png" style="display:block;margin:auto"><br></figure><br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>sns.heatmap(rets.corr())</span><br></pre></td></tr></table></figure><br><br><figure><br>    <img src="/2015/10/08/pandas-note/correlation.png" style="display:block;margin:auto"><br></figure>




  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/data-science/">data science</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/pandas/">pandas</a><a href="/tags/python/">python</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://www.flowrocky.com/2015/10/08/pandas-note/" data-title="pandas note | Flow Rock" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/10/08/Working-with-data/" title="Working with data">
  <strong>上一篇：</strong><br/>
  <span>
  Working with data</span>
</a>
</div>


<div class="next">
<a href="/2015/10/06/Numpy-note/"  title="Numpy note">
 <strong>下一篇：</strong><br/> 
 <span>Numpy note
</span>
</a>
</div>

</nav>

	

<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Series"><span class="toc-number">1.</span> <span class="toc-text">Series</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DataFrame"><span class="toc-number">2.</span> <span class="toc-text">DataFrame</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reindexing"><span class="toc-number">3.</span> <span class="toc-text">Reindexing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Data_Alignment"><span class="toc-number">4.</span> <span class="toc-text">Data Alignment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Rank_and_Sort"><span class="toc-number">5.</span> <span class="toc-text">Rank and Sort</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Summary_Statistics"><span class="toc-number">6.</span> <span class="toc-text">Summary Statistics</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Example_for_stock_prices"><span class="toc-number">6.1.</span> <span class="toc-text">Example for stock prices</span></a></li></ol></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/coding/" title="coding">coding<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/data-science/" title="data science">data science<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/life/" title="life">life<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/algorithm/" title="algorithm">algorithm<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/leetcode/" title="leetcode">leetcode<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/python/" title="python">python<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/dp/" title="dp">dp<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/pandas/" title="pandas">pandas<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Xi-an/" title="Xi&#39;an">Xi&#39;an<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/seaborn/" title="seaborn">seaborn<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/recursive/" title="recursive">recursive<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/photo/" title="photo">photo<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/cityscape/" title="cityscape">cityscape<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Numpy/" title="Numpy">Numpy<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/matplotlib/" title="matplotlib">matplotlib<sup>1</sup></a></li>
			
		
			
		
			
		
			
		
			
		
		</ul>
</div>


  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Dream shall never fade <br/>
			</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/flowrock" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		<a href="https://www.linkedin.com/in/ruoyanliu" target="_blank" class="icon-linkedin" title="linkedin"></a>
		
		
		
		
		
		<a href="mailto:rl1969@nyu.edu" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2015 
		
		<a href="/about" target="_blank" title="Ruoyan Liu">Ruoyan Liu</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>




<script type="text/javascript">

var disqus_shortname = 'flowrock';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-68266631-1', 'www.flowrocky.com');  
ga('send', 'pageview');
</script>





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  <!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</body>
</html>
